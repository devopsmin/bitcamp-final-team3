<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<head data-th-replace="~{header :: head}"></head>
<header data-th-replace="~{header :: #page-header}"/>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
<!--fontawesome-->
<script src="https://kit.fontawesome.com/ecaa6a7d50.js" crossorigin="anonymous"></script>
<!-- Bootstrap JS ë° ì¢…ì†ì„± -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!--Naver MAP API-->
<script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=0zojwabqn9&submodules=geocoder"></script>
<script data-th-src="@{/js/mapUtils.js}"></script>

<body>
    <!-- ê²Œì‹œê¸€ì´ ì—†ëŠ” ê²½ìš° -->
    <p data-th-unless="${board}">ì—†ëŠ” ê²Œì‹œê¸€ì…ë‹ˆë‹¤.</p>

    <div class="container my-5" style="max-width: 1200px; margin: 0 auto;">
        <form id="myForm" data-th-action="@{modify}" method="post" enctype="multipart/form-data">
            <input type="hidden" name="boardNo" data-th-value="${board.boardNo}">

            <div class="mb-3">
                <h2 class="form-title" style="margin-left: 10px; font-size: 1.8rem; font-weight: bold;" data-th-text="${board.boardTitle}"></h2>
            </div>

            <div data-th-if="${board}" class="border-bottom pb-3 mb-1">
                <div class="d-flex align-items-center mb-3">
                    <img data-th-src="@{https://dgg7dnk35523.edge.naverncp.com/HZiW9aEJy7/user/profile/default.png(type=f,w=20,h=20)}"
                         data-th-unless="${board.writer.userPhoto}"
                         src="/images/default.png"
                         class="rounded-circle me-2" style="width: 40px; height: 40px;">
                    <img data-th-if="${board.writer.userPhoto}"
                         data-th-src="@{https://dgg7dnk35523.edge.naverncp.com/HZiW9aEJy7/user/profile/} + ${board.writer.userPhoto} + '?type=f&w=100&h=100'"
                         src="/images/default.png"
                         class="rounded-circle me-2" style="width: 40px; height: 40px;">
                    <div style="display: flex; flex-direction: column; align-items: flex-start;">
                        <div style="display: flex; align-items: center;">
                            <h5 class="mb-1" data-th-text="${board.writer.userNickname}" style="margin-right: 10px;">ë‹‰ë„¤ì„</h5>
                            <button type="button" class="btn btn-outline-secondary btn-sm">1:1 ì±„íŒ…ìš”ì²­</button>
                        </div>
                        <small class="text-muted" style="margin-top: 5px;">
                            ì‘ì„±ì¼: <span data-th-text="${#dates.format(board.boardCreatedDate, 'yyyy.MM.dd HH:mm')}">ë‚ ì§œ</span>
                            â€¢ ì¡°íšŒ: <span data-th-text="${board.boardCount}">ì¡°íšŒìˆ˜</span>
                        </small>
                    </div>
                    <div class="ms-auto">
                        <button type="button" class="btn btn-outline-secondary btn-sm" onclick="location.href='list'">ëª©ë¡</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-th-if="${isUserAuthorized}" data-th-onclick="document.getElementById('myForm').submit();">ìˆ˜ì •</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-th-if="${isUserAuthorized}" data-th-onclick="|deleteBoard(${board.boardNo})|">ì‚­ì œ</button>
                    </div>
                </div>

                <!-- ì¢‹ì•„ìš” ë° ì¦ê²¨ì°¾ê¸° ë²„íŠ¼ -->
                <div class="d-flex align-items-center" >
                    <button type="button" id="likeButton" class="btn btn-outline-danger btn-sm me-2"
                            data-th-text="${isLiked != null and isLiked ? 'â¤ï¸ ì¢‹ì•„ìš” ì·¨ì†Œ' : 'ğŸ¤ ì¢‹ì•„ìš”'}"
                            data-th-onclick="toggleLike([[${board.boardNo}]])"></button><br>
                    <span id="likeCount" class="me-3" data-th-text="${board.boardLike}">0</span>

                    <button type="button" id="favorButton" class="btn btn-outline-warning btn-sm me-2"
                            data-th-text="${isFavored != null and isFavored ? 'â­ ì¦ê²¨ì°¾ê¸° ì·¨ì†Œ' : 'âšª ì¦ê²¨ì°¾ê¸°'}"
                            data-th-onclick="toggleFavor([[${board.boardNo}]])"></button>
                    <span id="favorCount" class="me-3" data-th-text="${board.boardFavor}">0</span><br>
                </div>

                <div class="modal fade" id="checkLoginModal" tabindex="-1" aria-labelledby="checkLoginModalLabel" aria-hidden="true">
                    <div class="modal-dialog" style="margin-top: 300px;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="checkLoginModalLabel">ì•Œë¦¼</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. ë¡œê·¸ì¸ ì°½ìœ¼ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" id="confirmLoginButton">í™•ì¸</button>
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <div name="Companionrecruit" id="Companionrecruit" class="container my-3">
            <div id="scheduleListContainer" class="row" style="display: flex;"></div>
        </div>

        <!-- ì§€ë„ ì˜ì—­ -->
        <div class="container" style="max-width: 1200px; margin: 0 auto;">
            <div id="map" style="width: 1200px; height: 400px;"></div>
        </div><br>
    </div>

</body>
<!-- ë°ì´í„° ì „ë‹¬ : ScheduleList, companionrecruitList ë°ì´í„°ë¥¼ JavaScript ë¡œ ì „ë‹¬(Thymeleaf => Javascript) -->
<script data-th-inline="javascript">
    /*<![CDATA[*/
    var scheduleList = /*[[${scheduleList}]]*/ [];
    var companionrecruitList = /*[[${companionrecruitList}]]*/ [];
    /*]]>*/
</script>

<script>
    // Step 6: Grouping schedules by day
    let scheduleGroups = {};
    scheduleList.forEach(schedule => {
        if (!scheduleGroups[schedule.scheduleDay]) {
            scheduleGroups[schedule.scheduleDay] = [];
        }
        scheduleGroups[schedule.scheduleDay].push(schedule);
    });

    // Step 1: Iterating through scheduleGroups
    let columnCounter = 0;
    let rowDiv = null;

    for (const [day, schedules] of Object.entries(scheduleGroups)) {
        // Step 2: Finding the scheduleListContainer div
        const columnsContainer = document.getElementById('scheduleListContainer');

        // Create a new row div for every 3 columns
        if (columnCounter % 3 === 0) {
            rowDiv = document.createElement('div');
            rowDiv.className = 'row w-100 mb-3';
            columnsContainer.appendChild(rowDiv);
        }

        // Step 3: Creating the column-item div
        const columnItem = document.createElement('div');
        columnItem.className = 'column-item text-dark p-1 col-md-4';
        columnItem.style.width = '300px';
        columnItem.style.minWidth = '300px';

        // Step 4: Creating the fw-bold div
        const fwBoldDiv = document.createElement('div');
        fwBoldDiv.className = 'fw-bold mb-2';

        // Step 5: Setting text content for the fw-bold div
        fwBoldDiv.textContent = 'Day ' + day;

        // Adding fw-bold div to column-item div
        columnItem.appendChild(fwBoldDiv);

        // Prevent duplicate schedules by using a Set to track unique schedule routes
        const addedScheduleRoutes = new Set();

        schedules.forEach(schedule => {
            if (!addedScheduleRoutes.has(schedule.scheduleRoute)) {
                // Mark this schedule route as added
                addedScheduleRoutes.add(schedule.scheduleRoute);

                // Step 7: Creating the card structure
                const cardDiv = document.createElement('div');
                cardDiv.className = 'card border-0';
                cardDiv.id = 'locationCard';
                cardDiv.style.width = '100%';
                cardDiv.style.height = '100px';
                cardDiv.style.position = 'relative';

                const alignItemsDiv = document.createElement('div');
                alignItemsDiv.className = 'd-flex align-items-start gap-1 mt-1';
                alignItemsDiv.style.height = '100%';

                const positionRelativeDiv = document.createElement('div');
                positionRelativeDiv.className = 'position-relative d-flex flex-column align-items-center';
                positionRelativeDiv.style.height = '100%';

                const m2Div = document.createElement('div');
                m2Div.className = 'm-2 d-flex justify-content-center align-items-center rounded-circle text-white bg-primary';
                m2Div.style.width = '20px';
                m2Div.style.height = '20px';
                m2Div.style.fontSize = '10px';
                // Step 8-1: Setting text content for m2Div
                m2Div.textContent = schedule.scheduleRoute;

                const positionAbsoluteDiv = document.createElement('div');
                positionAbsoluteDiv.className = 'position-absolute bg-primary';
                positionAbsoluteDiv.style.width = '2px';
                positionAbsoluteDiv.style.height = 'calc(100% - 20px)';
                positionAbsoluteDiv.style.top = '30px';
                positionAbsoluteDiv.style.left = '50%';
                positionAbsoluteDiv.style.transform = 'translateX(-50%)';

                const flexColumnDiv = document.createElement('div');
                flexColumnDiv.className = 'd-flex flex-column align-items-start mt-2';

                const locationTypeP = document.createElement('p');
                locationTypeP.className = 'mb-0 bg-info rounded text-white p-1';
                locationTypeP.style.fontSize = '12px';
                locationTypeP.textContent = schedule.scheduleRoute == 0 ? 'ìˆ™ë°•ì—…ì†Œ' : 'ê´€ê´‘ëª…ì†Œ';

                const locationNameP = document.createElement('p');
                locationNameP.className = 'fs-6 fw-bold mb-0';
                // Step 8-2: Setting text content for locationNameP
                locationNameP.textContent = schedule.location.locationName;

                const locationImage = document.createElement('img');
                locationImage.alt = 'Location Image';
                locationImage.className = 'rounded me-3 h-100 ms-auto';
                locationImage.style.width = '60px';
                locationImage.style.objectFit = 'cover';
                // Step 8-3: Setting src for locationImage
                locationImage.src = schedule.location.locationPhoto;

                const daySpan = document.createElement('span');
                daySpan.className = 'day d-none';
                // Step 8-4: Setting text content for daySpan
                daySpan.textContent = schedule.scheduleDay;

                const routeSpan = document.createElement('span');
                routeSpan.className = 'route d-none';
                // Step 8-5: Setting text content for routeSpan
                routeSpan.textContent = schedule.scheduleRoute;

                const scheduleNoSpan = document.createElement('span');
                scheduleNoSpan.className = 'schedule-no d-none';
                // Step 8-6: Setting text content for scheduleNoSpan
                scheduleNoSpan.textContent = schedule.scheduleNo;

                const locationXSpan = document.createElement('span');
                locationXSpan.className = 'location-x d-none';
                // Step 8-7: Setting text content for locationXSpan
                locationXSpan.textContent = schedule.location.locationX;

                const locationYSpan = document.createElement('span');
                locationYSpan.className = 'location-y d-none';
                // Step 8-8: Setting text content for locationYSpan
                locationYSpan.textContent = schedule.location.locationY;

                // Appending child elements to appropriate parent elements
                positionRelativeDiv.appendChild(m2Div);
                positionRelativeDiv.appendChild(positionAbsoluteDiv);

                flexColumnDiv.appendChild(locationTypeP);
                flexColumnDiv.appendChild(locationNameP);

                alignItemsDiv.appendChild(positionRelativeDiv);
                alignItemsDiv.appendChild(flexColumnDiv);
                alignItemsDiv.appendChild(locationImage);
                alignItemsDiv.appendChild(daySpan);
                alignItemsDiv.appendChild(routeSpan);
                alignItemsDiv.appendChild(scheduleNoSpan);
                alignItemsDiv.appendChild(locationXSpan);
                alignItemsDiv.appendChild(locationYSpan);

                cardDiv.appendChild(alignItemsDiv);

                // Adding cardDiv to columnItem
                columnItem.appendChild(cardDiv);
            }
        });

        // Adding column-item div to the current row div
        rowDiv.appendChild(columnItem);
        columnCounter++;
    }

    // Step 1: Iterate through companionrecruitList
    companionrecruitList.forEach(companion => {
        const columnItems = document.querySelectorAll('#scheduleListContainer .column-item');

        columnItems.forEach(columnItem => {
            const locationCards = columnItem.querySelectorAll('.card.border-0');

            locationCards.forEach(card => {
                const scheduleNoSpan = card.querySelector('.schedule-no');

                if (scheduleNoSpan && scheduleNoSpan.textContent == companion.scheduleNo) {
                    const checked = companion.checked;
                    const checkedAll = companion.checkedAll;

                    if (checkedAll && !checked) {
                        const dayHeader = columnItem.querySelector('.fw-bold.mb-2');
                        const recruitTag = document.createElement('p');
                        recruitTag.className = 'mb-0 bg-secondary rounded text-white p-1';
                        recruitTag.style.fontSize = '12px';
                        recruitTag.style.width = '35%';
                        recruitTag.textContent = 'ì „ì¼ì • ë™í–‰êµ¬í•¨';
                        dayHeader.after(recruitTag);
                    } else if (!checkedAll && checked) {
                        const locationTypeP = card.querySelector('.d-flex.flex-column.align-items-start.mt-2 p.bg-info');
                        if (locationTypeP && locationTypeP.textContent !== 'ìˆ™ë°•ì—…ì†Œ') {
                            const recruitTag = document.createElement('p');
                            recruitTag.className = 'mb-0 bg-secondary rounded text-white p-1';
                            recruitTag.style.fontSize = '12px';
                            recruitTag.textContent = 'ë™í–‰êµ¬í•¨';
                            locationTypeP.after(recruitTag);
                        }
                    }
                }
            });
        });
    });
</script>

<script data-th-inline="javascript">
    <!-- ê²Œì‹œê¸€ì‚­ì œ -->
    function deleteBoard(no) {
        Swal.fire({
            title: 'í•´ë‹¹ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
            text: 'ì‚­ì œì‹œ ë‹¤ì‹œ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
            icon: 'warning',

            showCancelButton: true, // cancelë²„íŠ¼ ë³´ì´ê¸°. ê¸°ë³¸ì€ ì›ë˜ ì—†ìŒ
            confirmButtonColor: '#3085d6', // confrim ë²„íŠ¼ ìƒ‰ê¹” ì§€ì •
            cancelButtonColor: '#d33', // cancel ë²„íŠ¼ ìƒ‰ê¹” ì§€ì •
            confirmButtonText: 'í™•ì¸', // confirm ë²„íŠ¼ í…ìŠ¤íŠ¸ ì§€ì •
            cancelButtonText: 'ì·¨ì†Œ', // cancel ë²„íŠ¼ í…ìŠ¤íŠ¸ ì§€ì •

            // reverseButtons: true, // ë²„íŠ¼ ìˆœì„œ ê±°ê¾¸ë¡œ

        }).then(result => { // ë§Œì•½ Promiseë¦¬í„´ì„ ë°›ìœ¼ë©´,
            if (result.isConfirmed) { // ë§Œì•½ ëª¨ë‹¬ì°½ì—ì„œ confirm ë²„íŠ¼ì„ ëˆŒë €ë‹¤ë©´

                Swal.fire({
                    title: 'ì‚­ì œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
                    text: 'ì—¬í–‰ë™í–‰ ëª¨ì§‘ê¸€ ì‚­ì œì™„ë£Œ~!',
                    icon: 'success',

                    confirmButtonColor: '#3085d6', // confrim ë²„íŠ¼ ìƒ‰ê¹” ì§€ì •
                    confirmButtonText: 'í™•ì¸', // confirm ë²„íŠ¼ í…ìŠ¤íŠ¸ ì§€ì •
                }).then(result => {
                    location.href = "delete?boardNo=" + no;
                });
            }
        });
    }

    // ì¢‹ì•„ìš” í† ê¸€ í•¨ìˆ˜
    function toggleLike(boardNo) {
        const isLoggedIn = [[${isLoggedIn}]];

        if (!isLoggedIn) {
            const checkLoginModal = new bootstrap.Modal(document.getElementById('checkLoginModal'), {
                backdrop: 'static',
                keyboard: false
            });
            checkLoginModal.show();
        } else {
            fetch(`like/${boardNo}`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
            })
            .then(response => {
                return response.json().then(result => ({status: response.ok, data: result}));
            })
            .then(({status, data}) => {
                if (status) {
                    // UI ì—…ë°ì´íŠ¸: ì¢‹ì•„ìš” ë²„íŠ¼ ë° ì¹´ìš´íŠ¸ ë³€ê²½
                    const likeButton = document.getElementById('likeButton');
                    const likeCount = document.getElementById('likeCount');

                    likeButton.textContent = data.isLiked ? 'â¤ï¸ ì¢‹ì•„ìš” ì·¨ì†Œ' : 'ğŸ¤ ì¢‹ì•„ìš”';
                    likeCount.textContent = data.likeCount;

                    // ì„±ê³µ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
                    Swal.fire({
                        toast: true,
                        position: 'top-start',
                        icon: 'success',
                        title: 'ì¢‹ì•„ìš” ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.',
                        showConfirmButton: false,
                        timer: 1500,
                        timerProgressBar: true,
                    });
                } else {
                    // ì˜¤ë¥˜ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
                    Swal.fire({
                        toast: true,
                        position: 'top-start',
                        icon: 'error',
                        title: result.message || 'ì¢‹ì•„ìš” ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
                        showConfirmButton: false,
                        timer: 1500,
                        timerProgressBar: true,
                    });
                }
            })
            .catch(error => {
                console.error('ì¢‹ì•„ìš” ìš”ì²­ ì‹¤íŒ¨:', error);
                // alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
                // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
                Swal.fire({
                    toast: true,
                    position: 'top-start',
                    icon: 'error',
                    title: 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.',
                    showConfirmButton: false,
                    timer: 1500,
                    timerProgressBar: true,
                });
            });
        }
    }

    // ì¦ê²¨ì°¾ê¸° í† ê¸€ í•¨ìˆ˜
    function toggleFavor(boardNo) {
        const isLoggedIn = [[${isLoggedIn}]];

        if (!isLoggedIn) {
            const checkLoginModal = new bootstrap.Modal(document.getElementById('checkLoginModal'), {
                backdrop: 'static',
                keyboard: false
            });
            checkLoginModal.show();
        } else {
            fetch(`favor/${boardNo}`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
            })
            .then(response => {
                return response.json().then(result => ({status: response.ok, data: result}));
            })
            .then(({status, data}) => {
                if (status) {
                    // UI ì—…ë°ì´íŠ¸: ì¢‹ì•„ìš” ë²„íŠ¼ ë° ì¹´ìš´íŠ¸ ë³€ê²½
                    const favorButton = document.getElementById('favorButton');
                    const favorCount = document.getElementById('favorCount');

                    favorButton.textContent = data.isFavored ? 'â­ ì¦ê²¨ì°¾ê¸° ì·¨ì†Œ' : 'âšª ì¦ê²¨ì°¾ê¸°';
                    favorCount.textContent = data.favorCount;

                    // ì„±ê³µ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
                    Swal.fire({
                        toast: true,
                        position: 'top-start',
                        icon: 'success',
                        title: 'ì¦ê²¨ì°¾ê¸° ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.',
                        showConfirmButton: false,
                        timer: 1500,
                        timerProgressBar: true,
                    });
                } else {
                    // ì˜¤ë¥˜ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
                    Swal.fire({
                        toast: true,
                        position: 'top-start',
                        icon: 'error',
                        title: data.message || 'ì¦ê²¨ì°¾ê¸° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
                        showConfirmButton: false,
                        timer: 1500,
                        timerProgressBar: true,
                    });
                }
            })
            .catch(error => {
                console.error('ì¦ê²¨ì°¾ê¸° ìš”ì²­ ì‹¤íŒ¨:', error);
                // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
                Swal.fire({
                    toast: true,
                    position: 'top-start',
                    icon: 'error',
                    title: 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.',
                    showConfirmButton: false,
                    timer: 1500,
                    timerProgressBar: true,
                });
            });
        }
    }

    document.addEventListener('DOMContentLoaded', async () => {
        console.log(document.querySelectorAll('#scheduleListContainer').length);

        const stateName = /*[[${board.trip.city.state.stateName}]]*/ "defaultState";
        const cityName = /*[[${board.trip.city.cityName}]]*/ "defaultCity";

        const colors = ["primary", "warning", "danger", "info", "secondary", "success"];

        try {
            // ì§€ë„ì´ˆê¸°í™”
            await initializeMap("map", stateName, cityName);

            // addMarker(126.545219, 33.524923);
            const locationInfos = document.querySelectorAll('#scheduleListContainer');
            console.log(locationInfos);

            locationInfos.forEach(locationInfo => {
                // card ë‚´ë¶€ì˜ xì™€ y ì¢Œí‘œ ì¶”ì¶œ
                const locationX = locationInfo.querySelector('.location-x').textContent.trim();
                const locationY = locationInfo.querySelector('.location-y').textContent.trim();
                const scheduleRoute = locationInfo.querySelector('.route').textContent.trim();
                const scheduleDay = locationInfo.querySelector('.day').textContent.trim();

                const color = colors[(scheduleDay - 1) % colors.length];

                // x, y ì¢Œí‘œê°€ ì˜ ê°€ì ¸ì™€ì¡ŒëŠ”ì§€ ì¶œë ¥í•©ë‹ˆë‹¤.
                console.log(`Location X: ${locationX}, Location Y: ${locationY}`);

                // ìœ íš¨í•œ x, y ì¢Œí‘œê°€ ìˆëŠ” ê²½ìš° addMarker í•¨ìˆ˜ í˜¸ì¶œ
                if (locationX && locationY) {
                    addMarker(parseFloat(locationX), parseFloat(locationY), parseInt(scheduleRoute), `text-${color}`);

                }
            });
        } catch (error) {
            console.error('ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
        }
    });

</script>

</html>
